<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Project Organisation</title>
    <meta charset="utf-8" />
    <meta name="author" content="Emma Rand" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css_files/emma.css" type="text/css" />
    <link rel="stylesheet" href="../css_files/emma-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Project Organisation
## Data Science option of BIO00058M Data Analysis.
### Emma Rand
### University of York, UK

---




<style>.shareagain-bar {
--shareagain-foreground: rgb(255, 255, 255);
--shareagain-background: rgba(0, 0, 0, 0.5);
}</style>






&lt;style&gt;
div.blue { background-color:#b0cdef; border-radius: 5px; padding: 20px;}
div.grey { background-color:#d3d3d3; border-radius: 0px; padding: 0px;}
&lt;/style&gt;

# Outline

This slide show describes some good practice for project organisation and introduces a workflow for project organisation using RStudio Projects.

It covers structured directories, naming conventions, READMEs and Licenses.

---
class: inverse

# What is a project?

---
# What is a project?

A project is a discrete piece of work which has a number of files associated with it. These might be data files, analysis scripts and outputs such as reports and figures.

--

One science research project might be divided into several sub-projects. For example, sub-projects for:

* data files and metadata (which may be made into a package)  
* analysis and reporting  
* a package developed for the analysis
* an app to allow others to explore the data

Or, all files might be in a single project.

---
# Organising a project

* Use an RStudio Project or similar (many IDEs have them) for each sub-project 
* Structure your directories
* Have naming conventions   
* Document thoroughly
  * README
  * License
  * Comprehensive commenting

---
class: inverse

# RStudio Projects

---
# RStudio Projects

An [RStudio Project](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects) is a directory with an .Rproj file in it. 

The name of the RStudio Project is the same as the name of the top level directory which is referred to as the Project directory.

--

Project is obviously a common word. When I am referring to an [RStudio Project](https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects) I will use the capitalised words 'RStudio Project'.

In other cases, I will use 'project'.



---
# RStudio Projects

**Example**
If you create an RStudio Project called `stem_cell_rna` then your folder structure would look something like this:

.pull-left[
```
-- stem_cell_rna
   |__stem_cell_rna.Rproj
   |__raw_ data/
      |__2019-03-21_donor_1.csv
   |__README.md
   |__LICENSE
   |__R/
      |__01_data_processing.R
      |__02_exploratory.R
      |__functions/
         |__01_file_import
         |__02_normalise.R
 
```
]


---
# RStudio Projects

.pull-left[
```
*-- stem_cell_rna
   |__stem_cell_rna.Rproj
   |__raw_ data/
      |__2019-03-21_donor_1.csv
   |__README.md
   |__LICENSE
   |__R/
      |__01_data_processing.R
      |__02_exploratory.R
      |__functions/
         |__01_file_import
         |__02_normalise.R
 
```
]

.pull-right[
the Project directory
]
---
# RStudio Projects
.pull-left[
```
-- stem_cell_rna
*  |__stem_cell_rna.Rproj
   |__raw_ data/
      |__2019-03-21_donor_1.csv
   |__README.md
   |__LICENSE
   |__R/
      |__01_data_processing.R
      |__02_exploratory.R
      |__functions/
         |__01_file_import
         |__02_normalise.R
 
```
]

.pull-right[
  
the .RProj file which is the defining feature of an RStudio Project
]

---
# RStudio Projects

When you open an RStudio Project, the working directory is set to the Project directory (i.e., the location of the .Rproj file).  

When you use an RStudio Project you do not need to use `setwd()`

--

.font150[
ü§Ø
]

--

And your whole project is portable!


--

When someone, including future you, opens the project on another machine, all the paths just work.

.font150[
üéà
]
---
class: inverse

# Directory structure

---
# Directory structure

You are aiming for structured , systematic and repeatable. For example, the Project directory typically contains:

* .RProj file  
* README - tell people what the project is and how to use it  
* LICENSE - tell people what they are allowed to do with your project 
* Directories
  * data-raw/  
  * images/  
  * R/
  * reports/
  * figures/  

---
# README

READMEs are a form of documentation which have been widely used for a long time. They contain all the information about the other files in a directory. They can be extensive.

* Wikipedia [README page](https://en.wikipedia.org/wiki/README)  
* GitHub Doc's [About READMEs
](https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/about-readmes)  

---
# README

For *this* module assessment you need only have:

* Title 
* Description, 50 - 100 words on what the project is or does
* Technical Description of the project
  * What software and packages are needed including versions
  * Any instructions needed to run the analysis/use the software
  * Any issues that a user (me!) might face in running the analysis/using the software

The README is part of the 2000 word count
---
# License

A license tells others what they can and can't do with your source code.

[choosealicense.com](https://choosealicense.com/) is a useful explainer.

I typically use:

* [MIT License](https://choosealicense.com/licenses/mit/) for software
* [CC-BY-SA-4.0](https://choosealicense.com/licenses/cc-by-sa-4.0/) for other work
---
class: inverse

# Naming things

---
# Naming things

Guiding principle - names of files and directories should be systematic and readable by humans and machines. Have a convention!

I suggest
  * no spaces in names
  * use snake_case or kebab-case rather than CamelCase  or dot.case   
  * use all lower case except very occasionally where convention is otherwise, e.g., README, LICENSE
  * ordering: use left-padded numbers e.g., 01, 02....99 or 001, 002....999
  * dates [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format: 	2020-10-16
---
# Naming things - example

.code40[
```
-- stem_cell_rna
   |__stem_cell_rna.Rproj
   |__raw_ data
      |__2019-03-21_donor_1.csv
      |__2019-03-21_donor_2.csv
      |__2019-03-21_donor_3.csv
      |__2019-05-14_donor_1.csv
      |__2019-05-14_donor_2.csv
      |__2019-05-14_donor_3.csv
   |__processed_data
      |__all_long.txt
      |__all_wide.txt
   |__figures
      |__01_volcano_donor_1_vs_donor_2.eps
      |__02_volcano_donor_1_vs_donor_3.eps
   |__functions
      |__01_file_import
      |__02_normalise.R
      |__theme_pca.R
      |__theme_volcano.R
   |__pics
      |__01_image.png
      |__01_image.png
   |__README.md
   |__refs
      |__r_refs.bib
      |__proj_refs.bib
   |__analyses
      |__01_data_processing.R
      |__02_exploratory.R
      |__03_modelling.R
      |__04_figures.R
      |__05_report.Rmd
```
]

---
class: inverse

# Creating an RStudio Project

---
# Creating an RStudio Project

This workflow uses the **`usethis`** package and is demonstrated in "Project Organisation - demo"

---
# The workflow

üé¨ Go to RStudio and check your working directory:

```r
getwd()
```

`"C:/Users/er13/Desktop"`

‚ùì Is your working directory a good place to create a Project folder?

---
# The workflow

If this is a good place to create a Project directory then...

üé¨ Create a project with:

```r
usethis::create_project("bananas")
```

--

Otherwise

If you want the project directory elsewhere, you will need to give the relative path, e.g.


```r
usethis::create_project("../Documents/bananas")
```

---
# A workflow

The output will look like this and a new RStudio session will start.

.code70[
```
&gt; usethis::create_project("bananas")
‚àö Creating 'bananas/'
‚àö Setting active project to 'C:/Users/er13/Desktop/bananas'
‚àö Creating 'R/'
‚àö Writing 'bananas.Rproj'
‚àö Adding '.Rproj.user' to '.gitignore'
‚àö Opening 'C:/Users/er13/Desktop/bananas/' in new RStudio session
‚àö Setting active project to '&lt;no active project&gt;'
```
]
---
# RStudio projects 

When you create a new RStudio Project with  **`usethis`**:

-  A folder called `bananas/` is created
-  RStudio starts a new session in  `bananas/`
   i.e., your working directory is now `bananas/`
-  A folder called `R/` is created
-  A file called `bananas.Rproj` is created
-  A file called `.gitignore` is created
-  A hidden directory called `.Rproj.user` is created
-  `.Rproj.user` is added `.gitignore`

---
# RStudio projects 

-  the .Rproj file is what makes the directory an RStudio Project  

--

-  the Rproj.user directory is where project-specific temporary files are stored.  

--

-  the `.gitignore` is used for version controlled projects. For this module, you can ignore it.

--

Using an RStudio Project helps you manage file paths. The working directory is the Project directory (i.e., the location of the .Rproj file).

---
# RStudio projects 

You close an RStudio Project with ONE of:

1. File | Close Project
2. Using the drop-down option on the far right of the tool bar where you see the Project name  

--

You can open an RStudio Project with ONE of:

1. File | Open Project or  File | Recent Projects    
2. Using the drop-down option on the far right of the tool bar where you see the Project name   
3. Double-clicking an .Rproj file from your file explorer/finder  

When you open project, a new R session starts and various settings are restored to their condition when the project was closed.

---
# The workflow

Once the RStudio project has been created, **`usethis`** helps you follow good practice.

üé¨ Add a README with:

```r
usethis::use_readme_md()
```

--

This create a file called `README.md`, with a little default text, in the Project directory and opens it for editing.

---
# The workflow

A license can be added in a similar way.

üé¨ Add a README with:

```r
usethis::use_ccby_license()
```

--

This creates a file called `LICENSE.md` containing the [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License](https://creativecommons.org/licenses/by-nc-sa/4.0/)

---
# Summary

.font80[
-  Using an RStudio Project makes your work more portable
-  An RStudio Project is a directory containing a .RProj file
-  The name of the RStudio Project equals the name of that directory
-  It is best practice for an RStudio Project (or equivalent) to 
   -  include a README and a LICENSE
   -  have a systematic folder structure often including these directories  `data-raw`, `R/`
   -  use systematic human- and machine-readable names
-  the **`usethis`** package is one way to create and populate an RStudio Project and the workflow is:
   -  `getwd()`
   -  `usethis::create_project("bananas")`
   -  `usethis::use_readme_md()`
   -  `usethis::use_ccby_license()` (data, data analysis, tutorials etc) or `usethis::use_mit_license()` (software)
]
---
# Reading

## Strongly recommended
* Chapter 2 Project-oriented workflow | What They Forgot to Teach You About R (Bryan and Hester, b)

## Further
* Ten simple rules for reproducible computational research (Sandve Nekrutenko, et al., 2013) 
* Good enough practices in scientific computing (Wilson Bryan, et al., 2017)  
* Excuse Me, Do You Have a Moment to Talk About Version Control? (Bryan, )  



---
# References
.font50[
.footnote[
Slides made with xaringan (Xie, 2021),  xaringanExtra (Aden-Buie, 2020), xaringanthemer (Aden-Buie, 2021) and RefManageR (McLean, 2017) 

]

Aden-Buie, G. (2020). _xaringanExtra: Extras And Extensions for
Xaringan Slides_. R package version 0.2.3.9000. URL:
[https://github.com/gadenbuie/xaringanExtra](https://github.com/gadenbuie/xaringanExtra).

Aden-Buie, G. (2021). _xaringanthemer: Custom 'xaringan' CSS Themes_. R
package version 0.4.0. URL:
[https://CRAN.R-project.org/package=xaringanthemer](https://CRAN.R-project.org/package=xaringanthemer).

Bryan, J. "Excuse Me, Do You Have a Moment to Talk About Version
Control?" In: _Am. Stat._ 72.1. 2018, pp. 20-27.

Bryan, J. and J. Hester _What They Forgot to Teach You About R_. &lt;URL:
https://whattheyforgot.org/project-oriented-workflow.html&gt;. Accessed:
2021-9-26.

McLean, M. W. (2017). "RefManageR: Import and Manage BibTeX and
BibLaTeX References in R". In: _The Journal of Open Source Software_.
DOI: [10.21105/joss.00338](https://doi.org/10.21105%2Fjoss.00338).

Sandve, G. K., A. Nekrutenko, et al. (2013). "Ten simple rules for
reproducible computational research". En. In: _PLoS Comput. Biol._
9.10, p. e1003285.

Wilson, G., J. Bryan, et al. (2017). "Good enough practices in
scientific computing". En. In: _PLoS Comput. Biol._ 13.6, p. e1005510.

Xie, Y. (2021). _xaringan: Presentation Ninja_. R package version 0.22.
URL:
[https://CRAN.R-project.org/package=xaringan](https://CRAN.R-project.org/package=xaringan).

]
---

Emma Rand &lt;br&gt; [emma.rand@york.ac.uk](mailto:emma.rand@york.ac.uk) &lt;br&gt; Twitter: [@er13_r](https://twitter.com/er13_r) &lt;br&gt; GitHub: [3mmaRand](https://github.com/3mmaRand)  &lt;br&gt; blog: https://buzzrbeeline.blog/
&lt;br&gt;
&lt;br&gt;
&lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;&lt;img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /&gt;&lt;/a&gt;&lt;br /&gt;&lt;span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"&gt;Data Science strand of BIO00058M&lt;/span&gt; by &lt;span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"&gt;Emma Rand&lt;/span&gt; is licensed under a &lt;a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"&gt;Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License&lt;/a&gt;.
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
